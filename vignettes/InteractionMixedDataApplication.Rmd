---
title: "Interaction Mixed Data Application"
description: >
  This page provides analyses of interactions using mixed design (between-subjects and within-subjects) data.
output: rmarkdown::html_vignette
---

```{r, include=FALSE}
knitr::opts_chunk$set(fig.width = 7, fig.height = 6, comment = NA)
```

```{r, include=FALSE}
if (!require(EASI)) {
  if (!require(remotes)) install.packages("remotes")
  remotes::install_github("cwendorf/EASI")
}
library(EASI)
```

This page provides analyses of interactions using mixed design (between-subjects and within-subjects) data.

## Data Management

This code inputs the variable names and creates a viewable data frame.
```{r}
Factor <- c(rep(1, 10), rep(2, 10))
Factor <- factor(Factor, levels = c(1, 2), labels = c("Level1", "Level2"))
Outcome1 <- c(6, 8, 6, 8, 10, 8, 10, 9, 8, 7, 5, 9, 10, 9, 11, 4, 11, 7, 6, 8)
Outcome2 <- c(7, 13, 11, 10, 13, 8, 11, 14, 12, 11, 7, 8, 7, 11, 10, 7, 8, 4, 8, 10)
Outcome3 <- c(9, 16, 11, 12, 15, 13, 9, 14, 11, 10, 8, 6, 8, 11, 5, 7, 9, 3, 6, 7)
MixedData <- construct(Factor, Outcome1, Outcome2, Outcome3)
```

This code provides a table of summary statistics and a table of correlations.
```{r}
construct(Outcome1, Outcome2, Outcome3) |> describeSummaryBy(by = Factor)
construct(Outcome1, Outcome2, Outcome3) |> describeCorrelationsBy(by = Factor)
```

## Analyses of the Omnibus Design

Get an ANOVA for the design as a whole, including a source table, an estimate of the proportion of variance accounted for, and an ANOVA test of the main effects and interaction.
```{r}
construct(Outcome1, Outcome2, Outcome3) |> describeFactorial(by = Factor)
construct(Outcome1, Outcome2, Outcome3) |> estimateFactorial(by = Factor)
construct(Outcome1, Outcome2, Outcome3) |> testFactorial(by = Factor)
```

Plot the means and confidence intervals for the design as a whole.
```{r, Interaction-Mixed-Omnibus}
construct(Outcome1, Outcome2, Outcome3) |> plotFactorial(by = Factor, col = c("darkred", "darkblue"))
legend("topleft", inset = .01, box.lty = 0, pch = 16, legend = c("Level1", "Level2"), col = c("darkred", "darkblue"))
```

## Analyses of Interaction Contrasts

Identify a 2 x 2 interaction of interest (in this case, two levels of Outcome and the existing two levels of the Factor). Estimate, plot, and test the interaction contrast (which includes the comparisons within each simple effect).
```{r, Interaction-Mixed-Contrasts}
construct(Outcome1, Outcome2) |> estimateInteraction(by = Factor)
construct(Outcome1, Outcome2) |> testInteraction(by = Factor)
construct(Outcome1, Outcome2) |> plotInteraction(by = Factor)
```
